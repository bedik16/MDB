#:include connected.kv
#:include register.kv
#:include status.kv
#:include administration.kv
#:include start.kv
#:import Factory kivy.factory.Factory
<ErrorPopup@Popup>:
    auto_dismiss: False
    title: "Error"
    size_hint: None, None
    size: 400, 400

    BoxLayout:
        orientation: "vertical"

        BoxLayout:
            orientation: "vertical"
            Label:
                text: "Please enter a valid e-mail or password"
                multiline: False
                position_hint: None, None
                position: 200, 200
                font_size: 18

            Button:
                text: "Back"
                size_hint_y: .3
                font_size: 24
                on_press: root.dismiss()
    
<Login>:
    canvas.before:
        Rectangle:
            pos: self.pos
            size: self.size
            source: "background.jpg"
                
    GridLayout:
        cols: 1
        padding: [10, 10, 10, 10]
        BoxLayout:
            size_hint_y: .2
            id: login_layout
            orientation: "vertical"
            Label:
                text: "Welcome to the smart charging station"
                font_size: 32

        BoxLayout:
            orientation: "vertical"
            Label:
                text: "Email"
                font_size: 24
                valign: "bottom"
                halign: "left"
                text_size: root.width -20, 60
                
            TextInput:
                id: login
                multiline: False
                size_hint_y: .6
                valign: "top"
                font_size: 24

            Label:
                text: "Password"
                font_size: 24
                halign: "left"
                text_size: root.width -20, 60 

            TextInput:
                id: password
                size_hint_y: .6
                pos_hint: {'top': 1}
                multiline: False
                password: True
                font_size: 24

        BoxLayout:
            orientation: "horizontal"
            size_hint_y: .4
            spacing: 20

            Button:
                text: "Register"
                font_size: 24
                size_hint_y: .6
                on_press: root.do_register()

            Button:
                text: "Login"
                font_size: 24
                size_hint_y: .6
                on_press: root.do_login(login.text, password.text)

        BoxLayout:
            orientation: "vertical"
            size_hint_y: .2

            Label:
                text: "First time use ? Please register using the Register button"
                color: 1,0,0,1